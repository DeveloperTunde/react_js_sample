{"ast":null,"code":"var _jsxFileName = \"/Users/developertunde/iitatv/src/admin/components/SchedularForm.jsx\";\nimport React, { Component } from 'react';\nimport '../../assets/css/styles.css';\nimport AlertComponent from '../../reuseables/Alert';\nimport { format } from \"date-fns\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class SchedularForm extends Component {\n  constructor() {\n    super();\n\n    this.fetchVideos = () => {\n      //http://192.168.8.100/videostreaming/allvideos\n      fetch('videostreaming/allvideos.php', {\n        method: 'POST',\n        body: JSON.stringify({\n          accesstoken: 'userName'\n        })\n      }).then(response => response.json()).then(responseJSON => {\n        this.setState({\n          isLoaded: true,\n          videos: responseJSON['output'][0]['data']\n        });\n      });\n    };\n\n    this.state = {\n      startvideoat: '',\n      endvideoat: '',\n      togglealert: false,\n      alerttitle: '',\n      alertcontent: '',\n      alerttype: '',\n      videotitle: ''\n    };\n    this.handleStarttime = this.handleStarttime.bind(this);\n    this.handleEndtime = this.handleEndtime.bind(this);\n    this.handleTitle = this.handleTitle.bind(this);\n  }\n\n  showAlert(e) {\n    this.setState({\n      togglealert: e\n    });\n  }\n\n  handleStarttime(event) {\n    this.setState({\n      startvideoat: event.target.value\n    });\n  }\n\n  handleEndtime(event) {\n    this.setState({\n      endvideoat: event.target.value\n    });\n  }\n\n  handleTitle(event) {\n    this.setState({\n      videotitle: event.target.value\n    });\n  }\n\n  submitSelections() {\n    let starttime = this.props.starttimeprop;\n    let endtime = this.props.endtimeprop;\n    fetch('/videostreaming/addselection.php', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        selectedvideo: this.props.selectedvideo,\n        selectedday: format(this.props.starttimepropfull, \"yyyy-MM-dd\"),\n        startvideoat: this.state.startvideoat,\n        endvideoat: this.state.endvideoat,\n        starttime,\n        endtime,\n        videotitle: this.state.videotitle\n      })\n    }).then(response => response.json()).then(responseJSON => {\n      // alert(responseJSON);\n      this.showAlert(true);\n\n      if (responseJSON == 'success') {\n        this.setState({\n          alerttitle: 'Success',\n          alertcontent: 'The program has been scheduled',\n          alerttype: 'success'\n        });\n        setTimeout(() => {\n          window.location.reload();\n        }, 2000);\n      } else if (responseJSON == 'failed') {\n        this.setState({\n          alerttitle: 'Failed',\n          alertcontent: 'Please select another time frame for this programme',\n          alerttype: 'warning'\n        });\n      } else if (responseJSON == 'errortiming') {\n        this.setState({\n          alerttitle: 'Timeframe Error',\n          alertcontent: 'The selected timeframe is greater than the programme duration',\n          alerttype: 'warning'\n        });\n      }\n\n      setTimeout(() => {\n        this.showAlert(false);\n      }, 5000);\n    });\n  }\n\n  render() {\n    const {\n      togglealert,\n      alertcontent,\n      alerttype,\n      alerttitle\n    } = this.state;\n    var someDate = new Date();\n    var numberOfDaysToAdd = 3;\n    var date = someDate.setDate(someDate.getDate() + numberOfDaysToAdd);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overlay\",\n      children: [this.state.togglealert == true ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"uploadalert\",\n        children: /*#__PURE__*/_jsxDEV(AlertComponent, {\n          title: alerttitle,\n          showalert: togglealert,\n          content: alertcontent,\n          type: alerttype,\n          closealert: () => this.showAlert(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 19\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 28\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timepicker\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form_wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form_title\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Schedule Programme \", this.props.selectedvideo]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form_box\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Program Title:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: this.state.videotitle,\n              onChange: this.handleTitle.bind(this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form_box\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Scheduled Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: format(this.props.starttimepropfull, \"yyyy-MM-dd\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form_box\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Start Time:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"time\",\n              value: this.props.starttimeprop\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form_box\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"End Time:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"time\",\n              value: this.props.endtimeprop\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form_subtitle\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Specify Programme Start and End Duration in Minutes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form_box\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Start From:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"\",\n              value: this.state.startvideoat,\n              onChange: this.handleStarttime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form_box\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"End At:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"\",\n              value: this.state.endvideoat,\n              onChange: this.handleEndtime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form_subtitle2\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => this.submitSelections(),\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this);\n  }\n\n  componentDidMount() {\n    this.fetchVideos();\n  }\n\n}","map":{"version":3,"sources":["/Users/developertunde/iitatv/src/admin/components/SchedularForm.jsx"],"names":["React","Component","AlertComponent","format","SchedularForm","constructor","fetchVideos","fetch","method","body","JSON","stringify","accesstoken","then","response","json","responseJSON","setState","isLoaded","videos","state","startvideoat","endvideoat","togglealert","alerttitle","alertcontent","alerttype","videotitle","handleStarttime","bind","handleEndtime","handleTitle","showAlert","e","event","target","value","submitSelections","starttime","props","starttimeprop","endtime","endtimeprop","headers","selectedvideo","selectedday","starttimepropfull","setTimeout","window","location","reload","render","someDate","Date","numberOfDaysToAdd","date","setDate","getDate","componentDidMount"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../../assets/css/styles.css'\nimport AlertComponent from '../../reuseables/Alert'\nimport { format } from \"date-fns\";\n\n\n\n\n\nexport default class SchedularForm extends Component {\n    constructor() {\n        super();\n        this.state = {\n          startvideoat: '',\n          endvideoat: '',\n          togglealert:false,\n          alerttitle:'', alertcontent:'', alerttype:'',\n          videotitle:'',\n        }\n\n        this.handleStarttime = this.handleStarttime.bind(this);\n        this.handleEndtime = this.handleEndtime.bind(this);\n        this.handleTitle = this.handleTitle.bind(this);\n    }\n    \n    showAlert(e){\n        this.setState({\n            togglealert: e\n        })\n      }\n    \n\n    handleStarttime(event) {\n        this.setState({\n            startvideoat: event.target.value\n        });\n    }\n\n    handleEndtime(event) {\n        this.setState({\n            endvideoat: event.target.value\n        });\n    }\n\n\n    handleTitle(event) {\n        this.setState({\n            videotitle: event.target.value\n        });\n    }\n\n\n    submitSelections() {\n        let starttime = this.props.starttimeprop;\n        let endtime = this.props.endtimeprop;\n\n        fetch('/videostreaming/addselection.php', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                selectedvideo: this.props.selectedvideo,\n                selectedday: format(this.props.starttimepropfull, \"yyyy-MM-dd\"),\n                startvideoat: this.state.startvideoat,\n                endvideoat: this.state.endvideoat,\n                starttime,\n                endtime,\n                videotitle:this.state.videotitle,\n\n            })\n        })\n\n            .then((response) => response.json())\n            .then((responseJSON) => {\n\n               // alert(responseJSON);\n                this.showAlert(true);\n               \n                if(responseJSON =='success'){\n                    this.setState({\n                        alerttitle:'Success', alertcontent:'The program has been scheduled', alerttype:'success'\n                     })\n                     setTimeout(() => {\n                        window.location.reload();\n                     }, 2000);\n                }else if (responseJSON =='failed') {\n                    this.setState({\n                        alerttitle:'Failed', alertcontent:'Please select another time frame for this programme', alerttype:'warning'\n                     })\n                }else if (responseJSON =='errortiming') {\n                    this.setState({\n                        alerttitle:'Timeframe Error', alertcontent:'The selected timeframe is greater than the programme duration', alerttype:'warning'\n                     })\n                }\n               setTimeout(() => {\n                this.showAlert(false);\n              }, 5000);\n\n            })\n\n\n\n    }\n\n\n    render() {\n        const {togglealert, alertcontent, alerttype, alerttitle} = this.state; \n        \n        var someDate = new Date();\nvar numberOfDaysToAdd = 3;\nvar date = someDate.setDate(someDate.getDate() + numberOfDaysToAdd);  \n        return (\n            <div className=\"overlay\">\n            {(this.state.togglealert == true) ? \n                  <div className=\"uploadalert\">\n                    <AlertComponent \n                      title={alerttitle}\n                      showalert={togglealert} \n                      content={alertcontent}\n                      type={alerttype}\n                      closealert={() => this.showAlert(false)}/>\n                  </div> : <div></div>} \n         <div className=\"timepicker\">\n            <div className=\"form_wrapper\">\n                <div className=\"form_title\">\n                    <p>Schedule Programme {this.props.selectedvideo}</p>\n                </div>\n           \n                <div className=\"form_box\">\n                    <label>Program Title:</label>\n                    <input type=\"text\"  value={this.state.videotitle} onChange={this.handleTitle.bind(this)} />\n                </div>\n\n                <div className=\"form_box\">\n                    <label>Scheduled Date:</label>\n                    <input type=\"date\"  value={format(this.props.starttimepropfull, \"yyyy-MM-dd\")} />\n                </div>\n\n                <div className=\"form_box\">\n                    <label>Start Time:</label>\n                    <input type=\"time\" value={this.props.starttimeprop} />\n                </div>\n\n                <div className=\"form_box\">\n                    <label>End Time:</label>\n                    <input type=\"time\"  value={this.props.endtimeprop}/>\n                </div>\n\n                {/* <div className=\"form_subtitle\">\n                    <p>djdjdjd</p>\n                    <p>{this.props.starttimefull}</p>\n                    \n                </div> */}\n\n                \n\n                \n\n                \n                <div className=\"form_subtitle\">\n                    <p>Specify Programme Start and End Duration in Minutes</p>\n                </div>\n                <div className=\"form_box\">\n                    <label>Start From:</label>\n                    <input type=\"text\"  placeholder=\"\" value={this.state.startvideoat} onChange={this.handleStarttime}/>\n                </div>\n\n                <div className=\"form_box\">\n                    <label>End At:</label>\n                    <input type=\"text\"  placeholder=\"\" value={this.state.endvideoat} onChange={this.handleEndtime}/>\n                </div>\n\n                <div className=\"form_subtitle2\">\n                    <button onClick={() => this.submitSelections()}>Submit</button>\n                </div>\n\n            </div>\n\n        </div>\n            </div>\n\n\n        );\n\n\n\n    };\n\n\n\n\n    fetchVideos = () => {\n        //http://192.168.8.100/videostreaming/allvideos\n        fetch('videostreaming/allvideos.php', {\n            method: 'POST',   \n            body: JSON.stringify({\n                accesstoken: 'userName',\n\n            })\n        })\n\n            .then((response) => response.json())\n            .then((responseJSON) => {\n                this.setState({\n                    isLoaded: true,\n                    videos: responseJSON['output'][0]['data'],\n                })\n            })\n    }\n\n\n\n\n    componentDidMount() {\n        this.fetchVideos();\n\n    }\n\n\n\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}